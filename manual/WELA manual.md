#什么是WELA
---
##简介
WELA即World Editor Log Analyser, 世界编辑器日志分析工具. 为能详尽地分析一次WC3游戏中的战斗记录而生, 如果读者玩过魔兽世界, 那么一定对Skada(或者Recount)有所了解, WELA即WC3版的Skada.

WELA诞生于笔者2013年的一个仿魔兽世界副本地图项目, 因为对职业的输出平衡以及技能的实际效果分析提出了很高的要求, 笔者不得不制作了这么一款工具.

##适用人群
对于一般玩家而言, 他们很大程度上是不需要这么一件工具的, 因为地图作者应该专注于让玩家在一次游戏中获得最佳体验, 而不是让玩家反复研究, 如何得出这张地图的最优解.

WELA适合有着一颗数值策划的心的PVE地图作者.

如果你是一名地图作者, 你希望你设计的PVE型地图里面的英雄都有相对平衡的输出, 包括伤害输出, 治疗输出, 伤害承受等, 以及各种技能的实际效能. 但是又找不到合理的统计方式, 那么WELA将成为你的一个选项.

最后请记得将WELA从发布给玩家的版本移除, 因为WELA会让游戏偶尔卡顿.

##实现方式
WELA没有采用任何第三方修改WC3的手段, 你可以使用原版的WC3.

用户通过输入聊天信息的方式触发, 输出(使用Preload函数)一个或者几个纯文本的日志文件, 然后将这些日志文件放入WELA的网页端工具(使用Javascript编写)进行分析.

##缺陷
受限于笔者的时间与技术, WELA现有如下缺陷

* 集成过程繁琐, 需要与地图的伤害系统进行深度整合甚至重写. 
* 日志文件数据量庞大, 每记录4000条信息, 会自动输出一个日志, 导致WC3卡顿片刻
* 无法获取系统时间, 日志文件末尾会被添加一串随机字符串以防止文件名重复, 又因为算法不好, 仍然有极低的概率发生日志文件名重复
* 网页端工具使用Javascript编写, 并未对代码作优化.
* 显示器宽度必须为1920像素, 否则需要左右拖动以查看完整内容.
* 没有错误输入检测, 请不要测试工具的健壮性.

#怎么用WELA
---
##Jass集成 
地图代码中深度植入WELA的Jass代码. 将在后面详细说明.

##游戏输出
游戏中, WELA将持续记录单位所造成的伤害, 治疗等数据. 当然, 记录什么, 什么时候记录, 记录多少, 是完全可控的.

游戏中输入 `log <LOG名称>` 可以将当前的所有记录输出为一个日志文件, 存于硬盘中, 具体路径在Jass代码中配置. 例如:
```
log combatA
```
就可以生成一个 combatAXXXXXXXX.welog 文件.

XXXXXXXX是8位无效字符, 可不必理会.

如果用户长时间不输出日志, 当日志累积到一定条数时, 会自动输出一个名为 AutoXXXXXXXX.welog 的文件. 用户下次输出时, 日志内容是不包括已经输出过的内容的.

##查看报告
使用任何一款现代浏览器打开WELA的网页端工具. 推荐Google Chrome, Firefox, 强烈不推荐IE.

链接: [https://yatyricky.github.io/we/weloganalyser.html](https://yatyricky.github.io/we/weloganalyser.html)

如下图.
![main ui](file:///D:/AppServ/www/wetoolkit/manual/main_ui.jpg)
将该次游戏的所有日志文件, 包括自动输出的, 一起选择, 拖入到网页中, 查看日志分析结果.
![drag](file:///D:/AppServ/www/wetoolkit/manual/drag.jpg)
点击左侧的导航按钮, 即可快速查看战斗统计了, 如图:
![drag](file:///D:/AppServ/www/wetoolkit/manual/sample.jpg)
图中可以看到"笨笨小懒猫"(前WOW公会术士妹子)在"毒蜥"这场战斗中, 造成了最多的伤害.
"香浓的冰", 造成了大量的治疗, 但是其中有过半是溢出治疗, 实际治疗仅仅比"光又光"多出了一点.

#WELA功能详细介绍
---

#WELA原理解析
---
##Jass部分

##Javascript部分

#结语
---